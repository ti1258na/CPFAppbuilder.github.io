<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>

    <button id="btn" onclick="rr()">開始語音</button>
    <script>
        var i;        
        var clickbtn=document.getElementById("btn");
        setup();
        
         clickbtn.addEventListener('click',function(event){
             cpf.initSpeechRecognition("cmn-Hant-TW")
         });

         //clickbtn.addEventListener('click',cpf.initSpeechRecognition("cmn-Hant-TW"));

        // function rr(){
        //     cpf.initSpeechRecognition("cmn-Hant-TW")
        //     cpf.SetSpeech("On","cmn-Hant-TW","來了好涼晚拿碗",0.5,2);
        //         for(i=0;i<=255;i+=10){
        //            cpf.request('["analogWrite",6,'+i+']');
        //         }            
        // }
        function GetRecognizeResult(Result,Type){
            if(Result.includes("會不會")){
                cpf.SetSpeech("On","cmn-Hant-TW","來了好涼晚拿碗",0.5,2);
                for(i=0;i<=255;i+=10){
                   cpf.request('["analogWrite",6,'+i+']');
                }
                
            }
            else{
                cpf.SetSpeech("On","cmn-Hant-TW","來了好涼晚拿碗",0.5,2);
                for(i=255;i>0;i-=10){
                   cpf.request('["analogWrite",6,'+i+']');
                }
            }
        }
        
        function setup(){
            if(cpf){
                cpf.setPinMode('["resetPin"],["setPinMode","digital",6,"PWM"]');
            }
        }
        
        
    </script>
</body>
</html>